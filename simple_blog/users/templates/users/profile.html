{% extends "blog/base.html" %}
{% block title %}{{ profile.user.username }}'s Profile{% endblock %}

{% block content %}
<h2>{{ profile.user.username }}'s Profile</h2>

<div>
    <p><strong>Bio:</strong> {{ profile.bio }}</p>
    <p><strong>Followers:</strong> {{ profile.followers.count }}</p> 
    <p><strong>Following:</strong> {{ profile.following.count }}</p> 
</div>

{% if user.is_authenticated %}
    {% if user == profile.user %}
        <a href="{% url 'profile_edit' %}">Edit Profile</a>
    {% else %}
        {% if profile.user in request.user.following.all %}
            <a href="{% url 'unfollow_user' profile.user.username %}">Unfollow</a>
        {% else %}
            <a href="{% url 'follow_user' profile.user.username %}">Follow</a>
        {% endif %}
    {% endif %}
{% endif %}

<hr>

<h3>Posts by {{ profile.user.username }}</h3>
<ul>
    {% for post in profile.user.post_set.all %} 
        <li>
            <a href="{% url 'post_detail' post.id %}">{{ post.title }}</a> 
        </li>
    {% empty %}
        <li>No posts yet.</li>
    {% endfor %}
</ul>
{% endblock %}
